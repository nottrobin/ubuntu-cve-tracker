#!/usr/bin/env python2
# Copyright (C) 2016 Canonical, Ltd.
# Author: Steve Beattie <sbeattie@ubuntu.com>

from __future__ import print_function

import argparse
import sys

from cve_lib import meta_kernels

parser = argparse.ArgumentParser(description='Script to identify kernel meta package')
parser.add_argument('release', action='store', nargs=1, help='Release name (e.g. xenial)')
parser.add_argument('kernel', action='store', nargs=1, help='Kernel source package name')
args = parser.parse_args()

kernel = args.kernel[0]
release = args.release[0]
meta = meta_kernels.get_meta(release, kernel)

if meta is not None:
    print(meta)
else:
    print('Unable to find meta package for %s/%s...' % (kernel, release), file=sys.stderr)
    sys.exit(1)
