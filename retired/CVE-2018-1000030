PublicDateAtUSN: 2018-02-08
Candidate: CVE-2018-1000030
PublicDate: 2018-02-08 17:29:00 UTC
References:
 https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-1000030
 https://usn.ubuntu.com/usn/usn-3817-1
 https://usn.ubuntu.com/usn/usn-3817-2
Description:
 Python 2.7.14 is vulnerable to a Heap-Buffer-Overflow as well as a
 Heap-Use-After-Free. Python versions prior to 2.7.14 may also be vulnerable
 and it appears that Python 2.7.17 and prior may also be vulnerable however
 this has not been confirmed. The vulnerability lies when multiply threads
 are handling large amounts of data. In both cases there is essentially a
 race condition that occurs. For the Heap-Buffer-Overflow, Thread 2 is
 creating the size for a buffer, but Thread1 is already writing to the
 buffer without knowing how much to write. So when a large amount of data is
 being processed, it is very easy to cause memory corruption using a
 Heap-Buffer-Overflow. As for the Use-After-Free,
 Thread3->Malloc->Thread1->Free's->Thread2-Re-uses-Free'd Memory. The PSRT
 has stated that this is not a security vulnerability due to the fact that
 the attacker must be able to run code, however in some situations, such as
 function as a service, this vulnerability can potentially be used by an
 attacker to violate a trust boundary, as such the DWF feels this issue
 deserves a CVE.
Ubuntu-Description:
Notes:
 mdeslaur> original fix caused a regression, see second commit
Bugs:
 https://bugs.python.org/issue31530
 https://bugs.python.org/msg309265
Priority: low
Discovered-by:
Assigned-to:

Patches_python2.7:
 upstream: https://github.com/python/cpython/commit/6401e5671781eb217ee1afb4603cc0d1b0367ae6
 upstream: https://github.com/python/cpython/commit/dbf52e02f18dac6f5f0a64f78932f3dc6efc056b
upstream_python2.7: needs-triage
precise/esm_python2.7: released (2.7.3-0ubuntu3.11)
trusty_python2.7: released (2.7.6-8ubuntu0.5)
trusty/esm_python2.7: released (2.7.6-8ubuntu0.5)
xenial_python2.7: released (2.7.12-1ubuntu0~16.04.4)
artful_python2.7: ignored (reached end-of-life)
bionic_python2.7: not-affected (2.7.15~rc1-1)
cosmic_python2.7: not-affected (2.7.15~rc1-1)
devel_python2.7: not-affected (2.7.15~rc1-1)

Patches_python2.6:
upstream_python2.6: needs-triage
precise/esm_python2.6: DNE
trusty_python2.6: DNE
trusty/esm_python2.6: DNE
xenial_python2.6: DNE
artful_python2.6: DNE
bionic_python2.6: DNE
cosmic_python2.6: DNE
devel_python2.6: DNE

Patches_python3.6:
upstream_python3.6: needs-triage
precise/esm_python3.6: DNE
trusty_python3.6: DNE
trusty/esm_python3.6: DNE
xenial_python3.6: DNE
artful_python3.6: not-affected
bionic_python3.6: not-affected
cosmic_python3.6: not-affected
devel_python3.6: not-affected

Patches_python3.7:
upstream_python3.7: needs-triage
precise/esm_python3.7: DNE
trusty_python3.7: DNE
trusty/esm_python3.7: DNE
xenial_python3.7: DNE
artful_python3.7: not-affected
bionic_python3.7: not-affected
cosmic_python3.7: not-affected
devel_python3.7: not-affected

Patches_python3.4:
upstream_python3.4: needs-triage
precise/esm_python3.4: DNE
trusty_python3.4: not-affected
trusty/esm_python3.4: not-affected
xenial_python3.4: DNE
artful_python3.4: DNE
bionic_python3.4: DNE
cosmic_python3.4: DNE
devel_python3.4: DNE

Patches_python3.5:
upstream_python3.5: not-affected
precise/esm_python3.5: DNE
trusty_python3.5: not-affected
trusty/esm_python3.5: DNE (trusty was not-affected)
xenial_python3.5: not-affected
artful_python3.5: DNE
bionic_python3.5: DNE
cosmic_python3.5: DNE
devel_python3.5: DNE

Patches_python3.2:
upstream_python3.2: needs-triage
precise/esm_python3.2: DNE
trusty_python3.2: DNE
trusty/esm_python3.2: DNE
xenial_python3.2: DNE
artful_python3.2: DNE
bionic_python3.2: DNE
cosmic_python3.2: DNE
devel_python3.2: DNE
