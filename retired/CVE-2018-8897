PublicDateAtUSN: 2018-05-08 17:00:00 UTC
Candidate: CVE-2018-8897
CRD: 2018-05-08 17:00:00 UTC
PublicDate: 2018-05-08
References:
 https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-8897
 https://www.kb.cert.org/vuls/id/631579
 http://xenbits.xen.org/xsa/advisory-260.html
 http://everdox.net/popss.pdf
 https://usn.ubuntu.com/usn/usn-3641-1
 https://usn.ubuntu.com/usn/usn-3641-2
Description:
 A statement in the System Programming Guide of the Intel 64 and IA-32
 Architectures Software Developer's Manual (SDM) was mishandled in the
 development of some or all operating-system kernels, resulting in
 unexpected behavior for #DB exceptions that are deferred by MOV SS or POP
 SS, as demonstrated by (for example) privilege escalation in Windows,
 macOS, some Xen configurations, or FreeBSD, or a Linux kernel crash. The
 MOV to SS and POP SS instructions inhibit interrupts (including NMIs), data
 breakpoints, and single step trap exceptions until the instruction boundary
 following the next instruction (SDM Vol. 3A; section 6.8.3). (The inhibited
 data breakpoints are those on memory accessed by the MOV to SS or POP to SS
 instruction itself.) Note that debug exceptions are not inhibited by the
 interrupt enable (EFLAGS.IF) system flag (SDM Vol. 3A; section 2.3). If the
 instruction following the MOV to SS or POP to SS instruction is an
 instruction like SYSCALL, SYSENTER, INT 3, etc. that transfers control to
 the operating system at CPL < 3, the debug exception is delivered after the
 transfer to CPL < 3 is complete. OS kernels may not expect this order of
 events and may therefore experience unexpected behavior when it occurs.
Ubuntu-Description:
 Nick Peterson discovered that the Linux kernel did not properly handle
 debug exceptions following a MOV/POP to SS instruction. A local attacker
 could use this to cause a denial of service (system crash). This issue only
 affected the amd64 architecture.
Notes:
 tyhicks> Thanks to Andy Lutomirski for help in Linux kernel research and test
  case
Bugs:
Priority: high
Discovered-by: Nick Peterson
Assigned-to: 

Patches_linux:
 break-fix: - d8ba61ba58c88d5207c1ba2f7d9a2280e7d03be9
upstream_linux: released (4.16~rc7)
precise/esm_linux: released (3.2.0-134.180)
trusty_linux: released (3.13.0-147.196)
xenial_linux: released (4.4.0-124.148)
artful_linux: released (4.13.0-41.46)
bionic_linux: not-affected (landed pre-release in 4.15.0-15.16)
devel_linux: not-affected (landed pre-release in 4.15.0-15.16)

Patches_linux-lts-trusty:
upstream_linux-lts-trusty: released (4.16~rc7)
precise/esm_linux-lts-trusty: released (3.13.0-147.196~precise1)
trusty_linux-lts-trusty: DNE
xenial_linux-lts-trusty: DNE
artful_linux-lts-trusty: DNE
bionic_linux-lts-trusty: DNE
devel_linux-lts-trusty: DNE

Patches_linux-goldfish:
upstream_linux-goldfish: released (4.16~rc7)
precise/esm_linux-goldfish: DNE
trusty_linux-goldfish: ignored (abandoned)
xenial_linux-goldfish: ignored (was needs-triage now end-of-life)
artful_linux-goldfish: DNE
bionic_linux-goldfish: DNE
devel_linux-goldfish: DNE

Patches_linux-grouper:
upstream_linux-grouper: released (4.16~rc7)
precise/esm_linux-grouper: DNE
trusty_linux-grouper: ignored (abandoned)
xenial_linux-grouper: DNE
artful_linux-grouper: DNE
bionic_linux-grouper: DNE
devel_linux-grouper: DNE

Patches_linux-maguro:
upstream_linux-maguro: released (4.16~rc7)
precise/esm_linux-maguro: DNE
trusty_linux-maguro: ignored (abandoned)
xenial_linux-maguro: DNE
artful_linux-maguro: DNE
bionic_linux-maguro: DNE
devel_linux-maguro: DNE

Patches_linux-mako:
upstream_linux-mako: released (4.16~rc7)
precise/esm_linux-mako: DNE
trusty_linux-mako: ignored (abandoned)
xenial_linux-mako: ignored (abandoned)
artful_linux-mako: DNE
bionic_linux-mako: DNE
devel_linux-mako: DNE

Patches_linux-manta:
upstream_linux-manta: released (4.16~rc7)
precise/esm_linux-manta: DNE
trusty_linux-manta: ignored (abandoned)
xenial_linux-manta: DNE
artful_linux-manta: DNE
bionic_linux-manta: DNE
devel_linux-manta: DNE

Patches_linux-flo:
upstream_linux-flo: released (4.16~rc7)
precise/esm_linux-flo: DNE
trusty_linux-flo: ignored (abandoned)
xenial_linux-flo: ignored (abandoned)
artful_linux-flo: DNE
bionic_linux-flo: DNE
devel_linux-flo: DNE

Patches_linux-raspi2:
upstream_linux-raspi2: released (4.16~rc7)
precise/esm_linux-raspi2: DNE
trusty_linux-raspi2: DNE
xenial_linux-raspi2: not-affected (x86 only)
artful_linux-raspi2: not-affected (x86 only)
bionic_linux-raspi2: not-affected (x86 only)
devel_linux-raspi2: not-affected (x86 only)

Patches_linux-lts-utopic:
upstream_linux-lts-utopic: released (4.16~rc7)
precise/esm_linux-lts-utopic: DNE
trusty_linux-lts-utopic: ignored (end-of-life)
xenial_linux-lts-utopic: DNE
artful_linux-lts-utopic: DNE
bionic_linux-lts-utopic: DNE
devel_linux-lts-utopic: DNE

Patches_linux-lts-vivid:
upstream_linux-lts-vivid: released (4.16~rc7)
precise/esm_linux-lts-vivid: DNE
trusty_linux-lts-vivid: ignored (end-of-life)
xenial_linux-lts-vivid: DNE
artful_linux-lts-vivid: DNE
bionic_linux-lts-vivid: DNE
devel_linux-lts-vivid: DNE

Patches_linux-lts-wily:
upstream_linux-lts-wily: released (4.16~rc7)
precise/esm_linux-lts-wily: DNE
trusty_linux-lts-wily: ignored (end-of-life)
xenial_linux-lts-wily: DNE
artful_linux-lts-wily: DNE
bionic_linux-lts-wily: DNE
devel_linux-lts-wily: DNE

Patches_linux-krillin:
product_linux-krillin: not-affected (x86 only)

Patches_linux-vegetahd:
product_linux-vegetahd: not-affected (x86 only)

Patches_linux-lts-xenial:
upstream_linux-lts-xenial: released (4.16~rc7)
precise/esm_linux-lts-xenial: DNE
trusty_linux-lts-xenial: released (4.4.0-124.148~14.04.1)
xenial_linux-lts-xenial: DNE
artful_linux-lts-xenial: DNE
bionic_linux-lts-xenial: DNE
devel_linux-lts-xenial: DNE

Patches_linux-snapdragon:
upstream_linux-snapdragon: released (4.16~rc7)
precise/esm_linux-snapdragon: DNE
trusty_linux-snapdragon: DNE
xenial_linux-snapdragon: not-affected (x86 only)
artful_linux-snapdragon: not-affected (x86 only)
bionic_linux-snapdragon: DNE
devel_linux-snapdragon: DNE

Patches_linux-aws:
upstream_linux-aws: released (4.16~rc7)
precise/esm_linux-aws: DNE
trusty_linux-aws: released (4.4.0-1019.19)
xenial_linux-aws: released (4.4.0-1057.66)
artful_linux-aws: DNE
bionic_linux-aws: not-affected (4.15.0-1003.3)
devel_linux-aws: not-affected (4.15.0-1007.7)

Patches_linux-hwe:
upstream_linux-hwe: released (4.16~rc7)
precise/esm_linux-hwe: DNE
trusty_linux-hwe: DNE
xenial_linux-hwe: released (4.13.0-41.46~16.04.1)
artful_linux-hwe: DNE
bionic_linux-hwe: not-affected
devel_linux-hwe: DNE

Patches_linux-hwe-edge:
upstream_linux-hwe-edge: released (4.16~rc7)
precise/esm_linux-hwe-edge: DNE
trusty_linux-hwe-edge: DNE
xenial_linux-hwe-edge: released (4.13.0-41.46~16.04.1)
artful_linux-hwe-edge: DNE
bionic_linux-hwe-edge: pending (4.18.0-8.9~18.04.1)
devel_linux-hwe-edge: DNE

Patches_linux-gke:
upstream_linux-gke: released (4.16~rc7)
precise/esm_linux-gke: DNE
trusty_linux-gke: DNE
xenial_linux-gke: ignored (was needs-triage now end-of-life)
artful_linux-gke: DNE
bionic_linux-gke: DNE
devel_linux-gke: DNE

Patches_linux-azure:
upstream_linux-azure: released (4.16~rc7)
precise/esm_linux-azure: DNE
trusty_linux-azure: not-affected (4.15.0-1023.24~14.04.1)
xenial_linux-azure: released (4.13.0-1016.19)
artful_linux-azure: DNE
bionic_linux-azure: not-affected (4.15.0-1004.4)
devel_linux-azure: not-affected (4.15.0-1009.9)

Patches_linux-gcp:
upstream_linux-gcp: released (4.16~rc7)
precise/esm_linux-gcp: DNE
trusty_linux-gcp: DNE
xenial_linux-gcp: released (4.13.0-1015.19)
artful_linux-gcp: DNE
bionic_linux-gcp: not-affected (4.15.0-1003.3)
devel_linux-gcp: not-affected (4.15.0-1006.6)

Patches_linux-kvm:
upstream_linux-kvm: released (4.16~rc7)
precise/esm_linux-kvm: DNE
trusty_linux-kvm: DNE
xenial_linux-kvm: released (4.4.0-1023.28)
artful_linux-kvm: DNE
bionic_linux-kvm: not-affected (4.15.0-1004.4)
devel_linux-kvm: not-affected (4.15.0-1008.8)

Patches_linux-euclid:
upstream_linux-euclid: released (4.16~rc7)
precise/esm_linux-euclid: DNE
trusty_linux-euclid: DNE
xenial_linux-euclid: released (4.4.0-9027.29)
artful_linux-euclid: DNE
bionic_linux-euclid: DNE
devel_linux-euclid: DNE

Patches_linux-oem:
upstream_linux-oem: released (4.16~rc7)
precise/esm_linux-oem: DNE
trusty_linux-oem: DNE
xenial_linux-oem: released (4.13.0-1026.29)
artful_linux-oem: DNE
bionic_linux-oem: not-affected (4.15.0-1002.3)
devel_linux-oem: not-affected (4.15.0-1004.5)
